<!DOCTYPE html>
<html lang="en">

  <head>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="">
	<meta name="author" content="">

	<title>Grayscale - Start Bootstrap Theme</title>

	<!-- Bootstrap core CSS -->
	<link href="/static/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- <link href="{{ url_for('static', filename='vendor/bootstrap/css/bootstrap.min.css') }}" rel="stylesheet"> -->

	<!-- Custom fonts for this template -->
	<link href="/static/vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
    <!-- <link href="{{ url_for('static', filename='vendor/fontawesome-free/css/all.min.css') }}" rel="stylesheet"> -->
	<link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

	<!-- Custom styles for this template -->
    <link href="/static/css/grayscale.min.css" rel="stylesheet">
    <!-- <link href="{{ url_for('static', filename='css/grayscale.min.css') }}" rel="stylesheet"> -->

    <style>
        .hiddenfile {
            width: 0px;
            height: 0px;
            overflow: hidden;
        }
        .transition {
            opacity: 0;
        }
        .image-placeholder {
            width: 250px;
            height: 250px;
        }
        #predict:hover {
            color: lightgray;
        }
        /* @-webkit-keyframes dots {
            0% { background-position: 0px; }
            100% { background-position: 50px; }
        }

        span#dots {
            background: linear-gradient(to right, white 50%, gray 50%);
            color: transparent;
            -webkit-background-clip: text;
            -webkit-animation: dots 1s infinite steps(4);
            padding-right: 40px;
            margin-right: -40px;
        } */
    </style>
  </head>


  <body id="page-top">

	<!-- Navigation -->
	<!-- <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
	  <div class="container">
		<a class="navbar-brand js-scroll-trigger" href="#page-top">Start Bootstrap</a>
		<button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
		  Menu
		  <i class="fas fa-bars"></i>
		</button>
		<div class="collapse navbar-collapse" id="navbarResponsive">
		  <ul class="navbar-nav ml-auto">
			<li class="nav-item">
			  <a class="nav-link js-scroll-trigger" href="#about">About</a>
			</li>
			<li class="nav-item">
			  <a class="nav-link js-scroll-trigger" href="#projects">Projects</a>
			</li>
			<li class="nav-item">
			  <a class="nav-link js-scroll-trigger" href="#signup">Contact</a>
			</li>
		  </ul>
		</div>
	  </div>
	</nav> -->

	<!-- Header -->
	<header class="masthead">
	  <div class="container d-flex h-100 align-items-center">
		<div class="mx-auto text-center">
            <h1 class="mx-auto my-0 text-uppercase transition" id="header">INTERPRET PAINTINGS</h1>
            <h2 class="text-white-50 mx-auto mt-2 mb-5 transition">A tool to determine emotions of a given painting.</h2>
            <a href="#showImage" class="btn btn-primary js-scroll-trigger transition" id="start">Start</a>
		</div>
	  </div>
	</header>

    <!-- About Section -->
    <!-- 
	<section id="about" class="about-section text-center">
	  <div class="container">
		<div class="row">
		  <div class="col-lg-8 mx-auto">
			<h2 class="text-white mb-4">Built with Bootstrap 4</h2>
			<p class="text-white-50">Grayscale is a free Bootstrap theme created by Start Bootstrap. It can be yours right now, simply download the template on
			  <a href="http://startbootstrap.com/template-overviews/grayscale/">the preview page</a>. The theme is open source, and you can use it for any purpose, personal or commercial.</p>
		  </div>
		</div>
		<img src="img/ipad.png" class="img-fluid" alt="">
	  </div>
	</section> -->

	<!-- Projects Section -->
	<section id="projects" class="projects-section bg-light">
	  <div class="container">

        <!-- Featured Project Row -->
        <!--
		<div class="row align-items-center no-gutters mb-4 mb-lg-5">
		  <div class="col-xl-8 col-lg-7">
			<img class="img-fluid mb-3 mb-lg-0" src="img/bg-masthead.jpg" alt="">
		  </div>
		  <div class="col-xl-4 col-lg-5">
			<div class="featured-text text-center text-lg-left">
			  <h4>Shoreline</h4>
			  <p class="text-black-50 mb-0">Grayscale is open source and MIT licensed. This means you can use it for any project - even commercial projects! Download it, customize it, and publish your website!</p>
			</div>
		  </div>
        </div>
        -->

        <!-- Project One Row -->
        <div class="row justify-content-center no-gutters mb-5 mb-lg-0">
            <div class="col-lg-6">
                <div class="project-text w-100 my-auto text-center text-lg-center picture">
                    <img class="img img-fluid image-placeholder" src="/static/img/image-placeholder.png" alt="" id="showImage">
                </div>
            </div>
        </div>

        <div class="row justify-content-center no-gutters mb-5 mb-lg-0">
            <div class="col-lg-6">
				<div class="project-text w-100 my-auto text-center text-lg-center">
                    <form action="/getInterpretation" method="post" id="upload-image-form" enctype="multipart/form-data">
                        <label class="mb-0 text-white-50" style="cursor: pointer; color: gray !important;" id="choosePainting" for="uploadImage">CLICK TO SELECT IMAGE</label>
                        <input type="file" accept="image/jpeg, image/jpg, image/png" style="display: none;" id="uploadImage">
                        <input type="hidden" id="logfile" />
                    </form>
                </div>
            </div>
        </div>
        <!-- 
		<div class="row justify-content-center no-gutters mb-5 mb-lg-0">
		  <div class="col-lg-6">
			<img class="img-fluid" src="img/demo-image-01.jpg" alt="">
		  </div>
		  <div class="col-lg-6">
			<div class="bg-black text-center h-100 project">
			  <div class="d-flex h-100">
				<div class="project-text w-100 my-auto text-center text-lg-left">
                    <h4 class="text-white">Choose Image</h4>
                    <br>
                    <p class="mb-0 text-white-50" style="cursor: pointer;" id="choosePainting"><input type="file" accept="image/jpeg, image/jpg, image/png" style="display: none;" id="">Click to select image</p>
                    <hr class="d-none d-lg-block mb-0 ml-0">
				</div>
			  </div>
			</div>
		  </div>
        </div>
        -->

		<!-- Project Two Row -->
		<!--
		<div class="row justify-content-center no-gutters">
		  <div class="col-lg-6">
			<img class="img-fluid" src="img/demo-image-02.jpg" alt="">
		  </div>
		  <div class="col-lg-6 order-lg-first">
			<div class="bg-black text-center h-100 project">
			  <div class="d-flex h-100">
				<div class="project-text w-100 my-auto text-center text-lg-right">
				  <h4 class="text-white">Mountains</h4>
				  <p class="mb-0 text-white-50">Another example of a project with its respective description. These sections work well responsively as well, try this theme on a small screen!</p>
				  <hr class="d-none d-lg-block mb-0 mr-0">
				</div>
			  </div>
			</div>
		  </div>
		</div>
        -->
	  </div>
	</section>

    <div class="text-center" style="margin-bottom: 20px;">
        <a href="#page-top" class="mb-0 text-white-50 js-scroll-trigger" style="color: gray !important;">BACK TO TOP</a>
    </div>
    <!-- Signup Section -->
    <!--
	<section id="signup" class="signup-section">
	  <div class="container">
		<div class="row">
		  <div class="col-md-10 col-lg-8 mx-auto text-center">

			<i class="far fa-paper-plane fa-2x mb-2 text-white"></i>
			<h2 class="text-white mb-5">Subscribe to receive updates!</h2>

			<form class="form-inline d-flex">
			  <input type="email" class="form-control flex-fill mr-0 mr-sm-2 mb-3 mb-sm-0" id="inputEmail" placeholder="Enter email address...">
			  <button type="submit" class="btn btn-primary mx-auto">Subscribe</button>
			</form>

		  </div>
		</div>
	  </div>
	</section>
    -->
    <!-- Contact Section -->
    <!--
	<section class="contact-section bg-black">
	  <div class="container">

		<div class="row">

		  <div class="col-md-4 mb-3 mb-md-0">
			<div class="card py-4 h-100">
			  <div class="card-body text-center">
				<i class="fas fa-map-marked-alt text-primary mb-2"></i>
				<h4 class="text-uppercase m-0">Address</h4>
				<hr class="my-4">
				<div class="small text-black-50">4923 Market Street, Orlando FL</div>
			  </div>
			</div>
		  </div>

		  <div class="col-md-4 mb-3 mb-md-0">
			<div class="card py-4 h-100">
			  <div class="card-body text-center">
				<i class="fas fa-envelope text-primary mb-2"></i>
				<h4 class="text-uppercase m-0">Email</h4>
				<hr class="my-4">
				<div class="small text-black-50">
				  <a href="#">hello@yourdomain.com</a>
				</div>
			  </div>
			</div>
		  </div>

		  <div class="col-md-4 mb-3 mb-md-0">
			<div class="card py-4 h-100">
			  <div class="card-body text-center">
				<i class="fas fa-mobile-alt text-primary mb-2"></i>
				<h4 class="text-uppercase m-0">Phone</h4>
				<hr class="my-4">
				<div class="small text-black-50">+1 (555) 902-8832</div>
			  </div>
			</div>
		  </div>
		</div>

		<div class="social d-flex justify-content-center">
		  <a href="#" class="mx-2">
			<i class="fab fa-twitter"></i>
		  </a>
		  <a href="#" class="mx-2">
			<i class="fab fa-facebook-f"></i>
		  </a>
		  <a href="#" class="mx-2">
			<i class="fab fa-github"></i>
		  </a>
		</div>

	  </div>
    </section>
    -->

    <!-- Footer -->
	<footer class="bg-black small text-center text-white-50">
	  <div class="container">
		Copyright &copy; Briones & Mina 2018
	  </div>
    </footer>

	<!-- Bootstrap core JavaScript -->
	<script src="/static/vendor/jquery/jquery.min.js"></script>
	<script src="/static/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

	<!-- Plugin JavaScript -->
	<script src="/static/vendor/jquery-easing/jquery.easing.min.js"></script>

	<!-- Custom scripts for this template -->
    <script src="/static/js/grayscale.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function() {
            var cover = $(".transition");
            var ticker = 0;
            var fadetime = 300;
            // cover.hide();
            cover.each(function(i) { //3
                if(i%2==0) {
                    ticker += 1000;
                    // $(this).delay(ticker).fadeIn(fadetime); //1800
                    $(this).delay(ticker).animate({opacity: 1}, fadetime);
                }
                else {
                    ticker += 1000;
                    // $(this).delay(ticker).fadeIn(fadetime); //1800
                    $(this).delay(ticker).animate({opacity: 1}, fadetime);
                }	
            });
        });

		function renderImage(input) {
			if(input.files && input.files[0]) {
                var fadetime = 2000;
                var delay = 1000;
				var reader = new FileReader();
                var filename = "";
				reader.onload = function(e) {
                    $('#showImage').attr('src', e.target.result);
                    $('#showImage').delay(delay).fadeIn(fadetime);
                    filename = input.files[0].name.split(".jpg")[0];
                    $('#filename').html(filename);
                    $('#logfile').val(filename);
                    $('#filename').delay(delay*2).fadeIn(fadetime);
                    $('#predict').delay(delay*3).fadeIn(fadetime);

                    $('#predict').hover(function() {
                        $(this).attr("style", "color: lightgray !important");
                    }, function() {
                        $(this).attr("style", "color: gray !important");
                    });

                    $('#predict').bind("click", function() {
                        var dots = 5;
                        var interval = null;
                        if($('#prediction').html() != "") {
                            $('#prediction').delay(delay).fadeOut(1000);
                            setTimeout(function(){
                                // $('#prediction').html('Interpreting<span id="dots">...</span>').fadeIn(1000);
                                $('#prediction').html('Interpreting').fadeIn(1000);
                                var count = 0;
                                interval = setInterval(function(){
                                    count++;
                                    $('#prediction').html("Interpreting" + new Array(count % dots).join('.'));
                                }, delay/2);
                            }, delay*2);
                        }
                        else {
                            $('#prediction').html('Interpreting').fadeIn(1000);
                            var count = 0;
                            interval = setInterval(function(){
                                count++;
                                $('#prediction').html("Interpreting" + new Array(count % dots).join('.'));
                            }, delay/2);
                            // setTimeout(function(){
                            //     // $('#prediction').html('Interpreting<span id="dots">...</span>').fadeIn(1000);
                            // }, 0);
                        }
                        // $('#prediction').fadeIn(1000);
                        $.ajax({
                            type: 'POST',
                            url: '/getInterpretation',
                            data: 'logfile='+$('input#logfile').val(),
                            dataType: 'json',
                            success: function(data) {
                                clearInterval(interval);
                                $('#prediction').delay(delay).animate({opacity: 0});
                                $('#prediction').delay(delay).animate({opacity: 1});
                                setTimeout(function() {
                                    if(data.predictions[0] == data.predictions[1])
                                        $('#prediction').html('<strong>'+data.predictions[0]+'</strong>');
                                    else
                                        $('#prediction').html('<strong>'+data.predictions[0]+' or '+data.predictions[1]+'</strong>');
                                }, delay*2);
                            },
                            error: function(data) {
                                clearInterval(interval);
                                alert("Failed to connect to server. Please try again.");
                            }
                        });
                    });
				}
                reader.readAsDataURL(input.files[0]);
			}
			else
				$('.picture').html('<img class="img-fluid image-placeholder" src="/static/img/image-placeholder.png" alt="" id="image-placeholder">');
		}

		$('#uploadImage').change(function() {
            $('.picture').html('<img src="" class="img-fluid" id="showImage" style="display: none;" /> \
                    <br> \
                    <br> \
                    <br> \
                    <div> \
                        <label class="mb-0 text-white-20" style="color: gray !important; display: none;" id="filename" for=""></label> \
                        <br> \
                        <br> \
                        <label class="mb-0 text-white-50" style="cursor: pointer; color: gray !important; display: none;" id="predict" for=""><strong>INTERPRET</strong></label> \
                        <br> \
                        <br> \
                        <br> \
                        <label class="mb-0" style="font-size: 30pt; color: gray !important; display: none;" id="prediction" for=""><strong></strong></label> \
                    </div>');
			renderImage(this);
        });
    </script>

  </body>

</html>
